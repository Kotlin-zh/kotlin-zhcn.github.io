<html>
<head>
<meta charset="utf-8">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5P98');</script>
<!-- End Google Tag Manager -->


<title>Android Frameworks Using Annotation Processing - Kotlin 语言中文站</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/0_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="Android Frameworks Using Annotation Processing - Kotlin 语言中文站"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://www.kotlincn.net/docs/tutorials/android-frameworks.html"/>
<meta property="og:image" content="https://www.kotlincn.net/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description" content="This tutorial describes the usage of popular Android frameworks and libraries that use annotation processing with Kotlin.">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="Android Frameworks Using Annotation Processing - Kotlin 语言中文站">
    <meta name="twitter:description" content="This tutorial describes the usage of popular Android frameworks and libraries that use annotation processing with Kotlin.">
<meta name="twitter:image:src" content="https://www.kotlincn.net/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->
    <script src="/0_assets/default.js"></script>
    <script src="/0_assets/common.js"></script>
    <link rel="stylesheet" href="/0_assets/common.css"/>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5P98"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="http://www.kotliner.cn/"
               class="nav-item "
            >
                博客
            </a>

            <a href="/docs/reference/"
               class="nav-item "
            >
                学习
            </a>

            <a href="/community/"
               class="nav-item "
            >
                社区
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线试用
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
        <a class="conference-banner" href="https://kotlinconf.com/?utm_source=kotlinlang&utm_medium=web&utm_campaign=superearlybird">
            <div class="conference-banner__img"></div>
        </a>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">

    <nav role="navigation" class="docs-nav">
            <div class="nav-item-wrap">
                    <a href="/docs/reference/" class="nav-item">
                    <span class="nav-item-text">
                        参考
                    </span>
                    </a>

            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/tutorials/" class="nav-item is_active">
                        <span class="nav-item-text">
                            教程
                        </span>
                    </a>
            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/books.html" class="nav-item">
                    <span class="nav-item-text">
                        书籍
                    </span>
                    </a>

            </div>
            <div class="nav-item-wrap">
                    <a href="/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                    </a>

            </div>
    </nav>

    <div class="g-grid">
        <aside class="g-3">
            <div class="js-side-tree-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="开始">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">开始</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/getting-started.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">从 IntelliJ IDEA 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/getting-started-eclipse.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">从 Eclipse 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/command-line.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用命令行编译器</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/build-tools.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用构建工具</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/koans.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">心印</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="Android">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Android</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/kotlin-android.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Android 开发入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/android-plugin.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin Android 扩展</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">Android 框架</div>
                            </div>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java 互操作">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java 互操作</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/mixing-java-kotlin-intellij.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">在一个项目中混用 Java 和 Kotlin</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/kotlin-to-javascript/kotlin-to-javascript.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 转 JavaScript</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-gradle/getting-started-with-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 Gradle 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-idea/getting-started-with-intellij-idea.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 IntelliJ IDEA 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-maven/getting-started-with-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">以 Maven 入门</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/getting-started-command-line/command-line-library-js.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用命令行编译器创建 Kotlin JavaScript 库</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/working-with-modules/working-with-modules.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 与 JavaScript 模块使用</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/javascript/working-with-javascript.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 JavaScript 合用</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="协程">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">协程</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/coroutines-basic-jvm.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JVM 平台的 Kotlin 协程简介</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Web 开发">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Web 开发</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/httpservlets.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">用 Http Servlets 创建 web 应用</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/spring-boot-restful.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">用  Spring Boot 创建 RESTful Web 服务</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="工具">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">工具</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/tutorials/kotlin-and-ci.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">TeamCity 配置 Kotlin</span>
                            </a>
                    </div>

            </div>
    </nav>

            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/hltj/kotlin-web-site-cn/edit/master/pages/docs/tutorials/android-frameworks.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
            <h1>
                Android Frameworks Using Annotation Processing
            </h1>
            <table>
            </table>
                This tutorial describes the usage of popular Android frameworks and libraries that use annotation processing with Kotlin.
                <br/>
                <br/>
            
<p>The Android world has many popular frameworks simplifying development.
You can use the same frameworks if you develop in Kotlin, often as easily as you'd use them in Java. 
This tutorial provides examples and highlights the differences in settings.</p>
<p>We'll look at <a href="android-frameworks.html#dagger">Dagger</a>, <a href="android-frameworks.html#butterknife">Butterknife</a>, <a href="android-frameworks.html#auto-parcel">Auto-parcel</a> and <a href="android-frameworks.html#dbflow">DBFlow</a> (other frameworks can be set up similarly).
All these frameworks work through annotation processing: you annotate the code to have the boiler-plate code generated for you.
Annotations allow to hide all the verbosity and keep your code simple, and if you need to understand what actually happens at runtime, you can look at the generated code.
Note that all these frameworks generate source code in Java, not Kotlin.</p>
<p>In Kotlin you specify the dependencies in a similar to Java way using <a href="/docs/reference/kapt.html">Kotlin Annotation processing tool</a> (<code>kapt</code>) instead of <code>annotationProcessor</code>.</p>
<h3 id="dagger">Dagger</h3>
<p><a href="https://google.github.io/dagger//">Dagger</a> is a dependency injection framework.
If you're not familiar with it yet, you can read its <a href="https://google.github.io/dagger//users-guide.html">user's guide</a>.
We've converted <a href="https://github.com/google/dagger/tree/master/examples/simple">The coffee example</a> 
described in this guide into Kotlin, and you can find the result <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/kotlin-dagger">here</a>. 
The Kotlin code looks pretty much the same; you can browse the whole example in one <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/kotlin-dagger/src/main/kotlin/Coffee.kt">file</a>.</p>
<p>As in Java, you use <code>@Inject</code> to annotate the constructor used by Dagger to create instances of a class.
Kotlin has concise syntax for declaring a property and a constructor parameter at the same time.
To annotate the constructor, use the <code>constructor</code> keyword explicitly and put the <code>@Inject</code> annotation before it:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">class Thermosiphon 
@Inject constructor(
        private val heater: Heater
) : Pump {
    // ...
}    
</code></pre>
<p><code>@Module</code> annotates classes defining how to provide different objects.
When you pass an annotation argument as a vararg argument, you have to explicitly wrap it into <code>arrayOf</code>, like in <code>@Module(includes = arrayOf(PumpModule::class))</code> below:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@Module
abstract class PumpModule {
    @Binds
    abstract fun providePump(pump: Thermosiphon): Pump
}

@Module(includes = arrayOf(PumpModule::class))
class DripCoffeeModule {
    @Provides @Singleton
    fun provideHeater(): Heater = ElectricHeater()
}
</code></pre>
<p>Annotating methods looks absolutely the same. 
In the example above <code>@Binds</code> determines that a <code>Thermosiphon</code> object is used whenever a <code>Pump</code> is required, <code>@Provides</code> specifies the way to build a <code>Heater</code>, and <code>@Singleton</code> says that the same <code>Heater</code> should be used all over the place.</p>
<p>To have a dependency-injected implementation generated for the type, annotate it with <code>@Component</code>.
The generated class will have the name of this type prepended with Dagger, like <code>DaggerCoffeeShop</code> below:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@Singleton
@Component(modules = arrayOf(DripCoffeeModule::class))
interface CoffeeShop {
    fun maker(): CoffeeMaker
}

fun main(args: Array&lt;String&gt;) {
    val coffee = DaggerCoffeeShop.builder().build()
    coffee.maker().brew()
}
</code></pre>
<p>Dagger generates an implementation of <code>CoffeeShop</code> that allows you to get a fully-injected <code>CoffeeMaker</code>.
You can navigate and see the implementation of <code>DaggerCoffeeShop</code> if you open the project in IDE.</p>
<p>We observed that annotating your code almost hasn't changed when you switched to Kotlin.
Now let's see what changes should be made to the build script.</p>
<p>In Java you specify <code>Dagger</code> as <code>annotationProcessor</code> (or <code>apt</code>) dependency:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">dependencies {
  ...
  annotationProcessor "com.google.dagger:dagger-compiler:$dagger-version"
}
</code></pre>
<p>In Kotlin you have to add the <code>kotlin-kapt</code> plugin to enable <code>kapt</code>, and then replace <code>annotationProcessor</code> with <code>kapt</code>:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">apply plugin: 'kotlin-kapt'
dependencies {
    ...
    kapt "com.google.dagger:dagger-compiler:$dagger-version"
}
</code></pre>
<p>That's all!
Note that <code>kapt</code> takes care of your Java files as well, so you don't need to keep the <code>apt</code> dependency.</p>
<p>The full build script for the sample project can be found <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/kotlin-dagger/build.gradle">here</a>.
You can also look at the converted code for <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/android-dagger">the Android sample</a>.</p>
<h3 id="butterknife">ButterKnife</h3>
<p><a href="http://jakewharton.github.io/butterknife/">ButterKnife</a> allows to bind views to fields directly instead of calling <code>findViewById</code>.</p>
<p>Note that <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html">Kotlin Android Extensions</a> plugin (automatically bundled into the Kotlin plugin in Android Studio) solves the same issue: replacing <code>findViewById</code> with a concise and straightforward code.
Consider using it unless you're already using ButterKnife and don't want to migrate.</p>
<p>You use <code>ButterKnife</code> with Kotlin in the same way as you use it with Java.
Let's see first the changes in the Gradle build script, and then highlight some of the differences in the code.</p>
<p>In the Gradle dependencies you use add the <code>kotlin-kapt</code> plugin and replace <code>annotationProcessor</code> with <code>kapt</code>:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">apply plugin: 'kotlin-kapt'

dependencies {
    ...
    compile "com.jakewharton:butterknife:$butterknife-version"
    kapt "com.jakewharton:butterknife-compiler:$butterknife-version"
}
</code></pre>
<p>We've converted the ButterKnife <a href="https://github.com/JakeWharton/butterknife/tree/master/sample/app/src/main/java/com/example">sample</a> to Kotlin.
The resulting code can be found <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/android-butterknife">here</a>.</p>
<p>Let's look over it to spot what has changed.
In Java you annotated the field, binding it with the corresponding view:</p>
<pre><code class="code _highlighted" data-lang="text/x-java">@BindView(R2.id.title) TextView title;
</code></pre>
<p>In Kotlin you can't work with fields directly, you work with <a href="/docs/reference/properties.html">properties</a>. 
You annotate the property:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@BindView(R2.id.title)
lateinit var title: TextView
</code></pre>
<p>The <code>@BindView</code> annotation can be applied to the fields only, but the Kotlin compiler understands that and annotates the corresponding field under the hood when you apply the annotation to the whole property.</p>
<p>Note how <a href="/docs/reference/properties.html#late-initialized-properties">the lateinit modifier</a> allows to declare a non-null type initialized after the object is created (after the constructor call).
Without <code>lateinit</code> you'd have to declare a <a href="/docs/reference/null-safety.html">nullable type</a> and add additional nullability checks.</p>
<p>You can also configure methods as listeners, using ButterKnife annotations:</p>
<pre><code class="code _highlighted" data-lang="text/x-java">@OnClick(R2.id.hello)
internal fun sayHello() {
    Toast.makeText(this, "Hello, views!", LENGTH_SHORT).show()
}
</code></pre>
<p>This code specifies an action to be performed on the "hello" button click.
Note that with <a href="https://github.com/Kotlin/anko">the Anko library</a> and <a href="https://kotlinlang.org/docs/tutorials/android-plugin.html">Kotlin Android Extensions</a>, the same Kotlin code looks rather concise and can be written directly:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">hello.onClick {
    toast("Hello, views!")
}
</code></pre>
<h3 id="dbflow">DBFlow</h3>
<p><a href="https://github.com/Raizlabs/DBFlow">DBFlow</a> is a SQLite library that simplifies interaction with databases.
It heavily relies on annotation processing.</p>
<p>To use it with a project you configure annotation processing dependency using <code>kapt</code>:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">apply plugin: 'kotlin-kapt'

kapt "com.github.raizlabs.dbflow:dbflow-processor:$dbflow_version"
compile "com.github.raizlabs.dbflow:dbflow-core:$dbflow_version"
compile "com.github.raizlabs.dbflow:dbflow:$dbflow_version"
compile "com.github.raizlabs.dbflow:dbflow-kotlinextensions:$dbflow_version"
</code></pre>
<p><a href="https://agrosner.gitbooks.io/dbflow/content/including-in-project.html">Here</a> is a detailed guide how to add DBFlow to your project.</p>
<p>If your application already uses DBFlow, you can safely add Kotlin to your project. 
You can gradually convert existing code to Kotlin (ensuring that everything compiles along the way).
The converted code doesn't differ much from Java. 
For instance, declaring a table looks similar to Java with the small difference that default values for properties must be specified explicitly:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@Table(name="users", database = AppDatabase::class)
class User: BaseModel() {

    @PrimaryKey(autoincrement = true)
    @Column(name = "id")
    var id: Long = 0

    @Column
    var name: String? = null
}
</code></pre>
<p>Besides being able to convert existing functionality to Kotlin, you can also enjoy the Kotlin specific module.
DBFlow defines a bunch of extensions to make its usage in Kotlin more idiomatic.
Let's highlight some of the supported features.</p>
<p>You can declare tables as data classes:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@Table(database = KotlinDatabase::class)
data class User(@PrimaryKey var id: Long = 0, @Column var name: String? = null)
</code></pre>
<p>Queries might be expressed via C#-like LINQ syntax.
Thus the Java code below can be either converted directly or rewritten into the following style:</p>
<pre><code class="code _highlighted" data-lang="text/x-java">/* java */
List&lt;Result&gt; = SQLite.select()
    .from(Result.class)
    .where(Result_Table.column.eq(6))
    .and(Result_Table.column2.in("5", "6", "9")).queryList()
</code></pre>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">/* kotlin */                   
val results = (select
      from Result::class
      where (column eq 6)
      and (column2 `in`("5", "6", "9"))
      groupBy column).list
</code></pre>
<p>Having lambdas allows to write much simpler code for asynchronous computations:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">var items = (select from TestModel::class).list

// delete all these items.
items.processInTransactionAsync { it, databaseWrapper -&gt; it.delete(databaseWrapper) }
</code></pre>
<p>More details can be found <a href="https://agrosner.gitbooks.io/dbflow/content/KotlinSupport.html">here</a>.
You can also browse the converted <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/android-dbflow">sample application</a>.</p>
<h3 id="auto-parcel">Auto-Parcel</h3>
<p><a href="https://github.com/frankiesardo/auto-parcel">Auto-Parcel</a> allows to generate <code>Parcelable</code> values for classes annotated with <code>@AutoValue</code>.</p>
<p>When you specify the dependency you again use <code>kapt</code> as annotation processor to take care of Kotlin files:</p>
<pre><code class="code _highlighted" data-lang="text/x-groovy">apply plugin: 'kotlin-kapt'

dependencies {
    ...
    kapt "frankiesardo:auto-parcel:$latest-version"
}
</code></pre>
<p>The converted <a href="https://github.com/frankiesardo/auto-parcel/tree/master/sample">sample</a> can be found <a href="https://github.com/JetBrains/kotlin-examples/tree/master/gradle/android-auto-parcel">here</a>.</p>
<p>You can safely annotate Kotlin classes with <code>@AutoValue</code>.
Let's look at the converted <a href="https://github.com/frankiesardo/auto-parcel/blob/master/sample/src/main/java/model2/Address.java"><code>Address</code></a> class for which the <code>Parcelable</code> implementation will be generated:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@AutoValue
abstract class Address : Parcelable {
    abstract fun coordinates(): DoubleArray
    abstract fun cityName(): String

    companion object {
        fun create(coordinates: DoubleArray, cityName: String): Address {
            return builder().coordinates(coordinates).cityName(cityName).build()
        }
        
        fun builder(): Builder = `$AutoValue_Address`.Builder()
    }
    
    @AutoValue.Builder
    interface Builder {
        fun coordinates(x: DoubleArray): Builder
        fun cityName(x: String): Builder
        fun build(): Address
    }
}
</code></pre>
<p>Kotlin doesn't have <code>static</code> methods, so they should be place inside a <a href="/docs/reference/object-declarations.html#companion-objects"><code>companion object</code></a>.
If you still want to use them from Java code, annotate them with <a href="/docs/reference/java-to-kotlin-interop.html#static-methods"><code>@JvmStatic</code></a>.</p>
<p>If you need to access a Java class or method with a name that is not a valid identifier in Kotlin, you can <a href="/docs/reference/java-interop.html#escaping-for-java-identifiers-that-are-keywords-in-kotlin">escape the name</a> with the  backtick (`) character, like in accessing the generated class `<code>$AutoValue_Address</code>`.</p>
<p>Overall the converted code looks very similar to the original Java code.</p>

        </article>
    </div>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2017 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
            Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            由<a href="https://hltj.me/" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a>、<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a> <a href="/contribute.html#中文站翻译贡献者" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer>
</body>
</html>
<html>
<head>
<meta charset="utf-8">


<title>Kotlin 1.1 的新特性 - Kotlin 编程语言</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/0_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="Kotlin 1.1 的新特性 - Kotlin 编程语言"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://kotlinlang.org/docs/reference/whatsnew11.html"/>
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="Kotlin 1.1 的新特性 - Kotlin 编程语言">
    <meta name="twitter:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->    <script src="/0_assets/default.js"></script>
    <script src="/0_assets/common.js"></script>
</head>
<body>
<!--  -->

<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="/docs/reference/"
               class="nav-item "
            >
                学习
            </a>

            <a href="/contribute.html"
               class="nav-item "
            >
                贡献
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线试用
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
    <div class="g-grid">

        <div class="g-12">
<nav role="navigation" class="docs-nav">
        <div class="nav-item-wrap">
                <a href="/docs/reference/" class="nav-item is_active">
                        <span class="nav-item-text">
                            参考
                        </span>
                </a>
        </div>
        <div class="nav-item-wrap">
                <a href="/docs/tutorials/" class="nav-item">
                    <span class="nav-item-text">
                        教程
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        视频
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        事件
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                </a>

        </div>
</nav>        </div>

        <aside class="g-3">
            <div id="reference-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="开始">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">开始</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-syntax.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基础语法</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/idioms.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">习惯用法</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/coding-conventions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">编码习惯</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">1.1 的新特性</div>
                            </div>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="基础">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">基础</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-types.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基本类型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/packages.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">包</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/control-flow.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">控制流</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/returns.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">返回和跳转</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="类和对象">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">类和对象</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类和继承</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">属性和字段</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/interfaces.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">接口</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/visibility-modifiers.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">可见性修饰符</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/extensions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">扩展</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/data-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">数据类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/generics.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">泛型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/nested-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">嵌套类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/enum-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">枚举类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/object-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">对象</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegation.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委托</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegated-properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委托属性</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="函数和 Lambda 表达式">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">函数和 Lambda 表达式</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/functions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">函数</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/lambdas.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Lambda 表达式</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/inline-functions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">内联函数</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="其他">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">其他</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/multi-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">解构声明</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/collections.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">集合</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/ranges.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">区间</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/typecasts.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类型检查与转换</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/this-expressions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">This 表达式</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/equality.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">相等性</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/operator-overloading.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">操作符重载</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/null-safety.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">空安全</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/exceptions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">异常</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/annotations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">注解</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">反射</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/type-safe-builders.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类型安全的构建器</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="参考">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">参考</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="https://kotlinlang.org/api/latest/jvm/stdlib/index.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">API 参考</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/grammar.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">语法</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java 互操作">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java 互操作</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 调用 Java</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-to-kotlin-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Java 调用 Kotlin</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/dynamic-type.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">动态类型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript 互操作性</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript 反射</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="工具">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">工具</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-doc.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">生成 Kotlin 代码文档</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Maven</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-ant.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Ant</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Gradle</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-osgi.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 和 OSGi</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="常见问题">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">常见问题</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/faq.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">FAQ</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-java.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 Java 比较</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-scala.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 Scala 比较</span>
                            </a>
                    </div>

            </div>
    </nav>


                <a href="/docs/kotlin-docs.pdf" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考</span>
                </a>
            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/JetBrains/kotlin-web-site/edit/master/pages/docs/reference/whatsnew11.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
                
<h1 id="kotlin-11-的新特性">Kotlin 1.1 的新特性</h1>
<p>Kotlin 1.1 目前<a href="https://blog.jetbrains.com/kotlin/2017/01/kotlin-1-1-beta-is-here/">提供测试版</a>。在这里你可以找到该版本中提供的新功能列表。
请注意，任何新功能都可能会在 Kotlin 1.1 发布之前更改。</p>
<h2 id="javascript">JavaScript</h2>
<p>从 Kotlin 1.1 开始，JavaScript 目标平台不再当是实验性的。所有语言功能都支持，
并且有许多新的工具用于与前端开发环境集成。更详细改动列表，请参见<a href="#javascript-backend">下文</a>
。</p>
<h2 id="协程实验性的">协程（实验性的）</h2>
<p>Kotlin 1.1 的关键新特性是<em>协程</em>，它带来了 <code>future</code>/<code>await</code>、 <code>yield</code> 以及类似的编程模式的
支持。Kotlin 的设计中的关键特性是协程执行的实现是语言库的一部分，
而不是语言的一部分，所以你不必绑定任何特定的编程范式或并发库。</p>
<p>协程实际上是一个轻量级的线程，可以暂停并稍后恢复。协程由协程构建器函数启动、并使用特殊挂起函数挂起。例如，<code>future</code> 启动一个协程，当你使用 <code>await</code> 时，挂起协程的执行而执行等待的操作，并且当等待的操作完成时恢复该协程的执行（可能在不同的线程上）。</p>
<p>标准库通过 <code>yield</code> 和 <code>yieldAll</code> 函数使用协程来支持<em>惰性生成序列</em>。
在这样的序列中，在取回每个元素之后暂停返回序列元素的代码块，
并在请求下一个元素时恢复。这里有一个例子：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val seq = buildSequence {
    println("Yielding 1")
    yield(1)
    println("Yielding 2")
    yield(2)
    println("Yielding a range")
    yieldAll(3..5)
}

for (i in seq) {
    println("Generated $i")
}
</code></pre>
<p>这将输出：</p>
<pre><code>Yielding 1
Generated 1
Yielding 2
Generated 2
Yielding a range
Generated 3
Generated 4
Generated 5
</code></pre>
<p><code>future</code>/<code>await</code>的实现是作为外部库提供的（<a href="https://github.com/kotlin/kotlinx.coroutines">kotlinx.coroutines</a>）。
这里有一个显示其用法的例子：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">future {
    val original = asyncLoadImage("...original...") // 创建一个 Future
    val overlay = asyncLoadImage("...overlay...")   // 创建一个 Future
    ...
    // 当等待两图片加载是挂起
    // 当他们都加载完成后运行 `applyOverlay(...)`
    return applyOverlay(original.await(), overlay.await())
}
</code></pre>
<p>kotlinx.coroutines 的 <code>future</code> 实现依赖于 <code>CompletableFuture</code>，因此需要 JDK 8，但它也提供了可移植的 <code>defer</code> 原语，并且可以构建其他实现。</p>
<p>其 <a href="https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md">KEEP 文档</a>提供了
协程功能性的一个扩展描述。</p>
<p>请注意，协程目前还是一个<strong>实验性的功能</strong>，这意味着 Kotlin 团队不承诺在最终的 1.1 版本时保持
该功能的向后兼容性。</p>
<h2 id="其他语言功能">其他语言功能</h2>
<h3 id="类型别名">类型别名</h3>
<p>类型别名允许你为现有类型定义备用名称。
这对于泛型类型（如集合）以及函数类型最有用。
这里有几个例子：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">typealias FileTable&lt;K&gt; = MutableMap&lt;K, MutableList&lt;File&gt;&gt;

typealias MouseEventHandler = (Any, MouseEvent) -&gt; Unit
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/type-aliases.md">KEEP</a>。</p>
<h3 id="已绑定的可调用引用">已绑定的可调用引用</h3>
<p>现在可以使用 <code>::</code> 操作符来获取指向特定对象实例的方法或属性的<a href="reflection.html#function-references">成员引用</a>。
以前这只能用 lambda 表达式表示。
这里有一个例子：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val numberRegex = "\\d+".toRegex()
val numbers = listOf("abc", "123", "456").filter(numberRegex::matches)
// Result is list of "123", "456"
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/bound-callable-references.md">KEEP</a>。</p>
<h3 id="密封类和数据类">密封类和数据类</h3>
<p>Kotlin 1.1 删除了一些对 Kotlin 1.0 中已存在的密封类和数据类的限制。
现在你可以在同一个文件中的任何地方定义一个密封类的子类，而不只是以作为密封类嵌套类的方式。
数据类现在可以扩展其他类。
这可以用来友好且清晰地定义一个表达式类的层次结构：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">sealed class Expr

data class Const(val number: Double) : Expr()
data class Sum(val e1: Expr, val e2: Expr) : Expr()
object NotANumber : Expr()

fun eval(expr: Expr): Double = when (expr) {
    is Const -&gt; expr.number
    is Sum -&gt; eval(expr.e1) + eval(expr.e2)
    NotANumber -&gt; Double.NaN
}
</code></pre>
<p>更多详细信息请参阅<a href="https://github.com/Kotlin/KEEP/blob/master/proposals/sealed-class-inheritance.md">密封类</a> 及
<a href="https://github.com/Kotlin/KEEP/blob/master/proposals/data-class-inheritance.md">数据类</a>的 KEEP。</p>
<h3 id="lambda-表达式中的解构">lambda 表达式中的解构</h3>
<p>现在可以使用<a href="multi-declarations.html">解构声明</a>语法来解开传递给 lambda 表达式的参数。
这里有一个例子：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">map.mapValues { (key, value) -&gt; "$value!" }
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/destructuring-in-parameters.md">KEEP</a>。</p>
<h3 id="下划线用于未使用参数">下划线用于未使用参数</h3>
<p>对于具有多个参数的 lambda 表达式，可以使用 <code>_</code> 字符替换不使用的参数的名称：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">map.forEach { _, value -&gt; println("$value!") }
</code></pre>
<p>这也适用于<a href="multi-declarations.html">解构声明</a>：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val (_, status) = getResult()
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/underscore-for-unused-parameters.md">KEEP</a>。</p>
<h3 id="数字字面值中的下划线">数字字面值中的下划线</h3>
<p>正如在 Java 8 中一样，Kotlin 现在允许在数字字面值中使用下划线来分隔数字分组：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val oneMillion = 1_000_000
val hexBytes = 0xFF_EC_DE_5E
val bytes = 0b11010010_01101001_10010100_10010010
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/underscores-in-numeric-literals.md">KEEP</a>。</p>
<h3 id="对于属性的更短语法">对于属性的更短语法</h3>
<p>对于没有自定义访问器、或者将 getter 定义为表达式主体的属性，现在可以省略属性的类型：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val name = ""

val lazyName get() = ""
</code></pre>
<p>对于这两个属性，编译器会推断其属性类型是字符串。</p>
<h3 id="内联属性访问器">内联属性访问器</h3>
<p>如果属性没有幕后字段，现在可以使用 <code>inline</code> 修饰符来标记该属性访问器。
这些访问器的编译方式与<a href="inline-functions.html">内联函数</a>相同。</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val foo: Foo
    inline get() = Foo()
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/inline-properties.md">KEEP</a>。</p>
<h3 id="局部委托属性">局部委托属性</h3>
<p>现在可以对局部变量使用<a href="delegated-properties.html">委托属性</a>语法。
一个可能的用途是定义一个延迟求值的局部变量：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun foo() {
    val data: String by lazy { /* 计算该数据 */ }
    if (needData()) {
        println(data)   // 数据在此处计算
    }
}
</code></pre>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/local-delegated-properties.md">KEEP</a>。</p>
<h3 id="委托属性绑定的拦截">委托属性绑定的拦截</h3>
<p>对于<a href="delegated-properties.html">委托属性</a>，现在可以使用 <code>provideDelegate</code> 操作符拦截委托到属性的绑定
。
例如，如果我们想要在绑定之前检查属性名称，我们可以这样写：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">class ResourceLoader&lt;T&gt;(id: ResourceID&lt;T&gt;) {
    operator fun provideDelegate(thisRef: MyUI, property: KProperty&lt;*&gt;): ReadOnlyProperty&lt;MyUI, T&gt; {
        checkProperty(thisRef, property.name)
        …… // 属性创建
    }

    private fun checkProperty(thisRef: MyUI, name: String) { …… }
}

fun &lt;T&gt; bindResource(id: ResourceID&lt;T&gt;): ResourceLoader&lt;T&gt; { …… }

class MyUI {
    val image by bindResource(ResourceID.image_id)
    val text by bindResource(ResourceID.text_id)
}
</code></pre>
<p><code>provideDelegate</code> 方法在创建 <code>MyUI</code> 实例期间将会为每个属性调用，并且可以立即执行
必要的验证。</p>
<h3 id="泛型枚举值访问">泛型枚举值访问</h3>
<p>现在可以用泛型的方式来枚举枚举类的值：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">enum class RGB { RED, GREEN, BLUE }

print(enumValues&lt;RGB&gt;().joinToString { it.name }) // 输出 RED, GREEN, BLUE
</code></pre>
<h3 id="对于-dsl-中隐式接收者的作用域控制">对于 DSL 中隐式接收者的作用域控制</h3>
<p><code>@DslMarker</code> 注解允许限制来自 DSL 上下文中的外部作用域的接收者的使用。
考虑那个典型的 <a href="type-safe-builders.html">HTML 构建器示例</a>：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">table {
    tr {
        td { +"Text" }
    }
}
</code></pre>
<p>在 Kotlin 1.0 中，传递给 <code>td</code> 的 lambda 表达式中的代码可以访问三个隐式接收者：传递给 <code>table</code>、<code>tr</code>
和 <code>td</code> 的。 这允许你调用在上下文中没有意义的方法——例如在 <code>td</code> 里面调用 <code>tr</code>，从而
在 <code>&lt;td&gt;</code> 中放置一个 <code>&lt;tr&gt;</code> 标签。</p>
<p>在 Kotlin 1.1 中，你可以限制这种情况，以使只有在 <code>td</code> 的隐式接收者上定义的方法
会在传给 <code>td</code> 的 lambda 表达式中可用。你可以通过定义标记有 <code>@DslMarker</code> 元注解的注解
并将其应用于标记类的基类：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@DslMarker
annotation class HtmlTagMarker

@HtmlTagMarker
abstract class Tag(val name: String) { ... }

class TD() : Tag("td") { ... }

fun Tag.td(init: TD.() -&gt; Unit) {
}
</code></pre>
<p>现在，传递给 <code>td</code> 函数的lambda 表达式 <code>init</code> 的隐式接收者是一个用 <code>@HtmlTagMarker</code> 注解过的类，
因此也具有此注解的类型的外部接收者会被阻止。</p>
<p>更多详细信息请参阅其 <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/scope-control-for-implicit-receivers.md">KEEP</a>。</p>
<h3 id="rem-操作符"><code>rem</code> 操作符</h3>
<p><code>mod</code> 操作符现已弃用，而使用 <code>rem</code> 取代。动机参见<a href="https://youtrack.jetbrains.com/issue/KT-14650">这个问题</a>。</p>
<h2 id="标准库">标准库</h2>
<h3 id="字符串到数字的转换">字符串到数字的转换</h3>
<p>在 String 类中有一些新的扩展，用来将它转换为数字，而不会在无效数字上抛出异常：
<code>String.toIntOrNull(): Int?</code>、 <code>String.toDoubleOrNull(): Double?</code> 等。</p>
<p>还有整数转换函数，如 <code>Int.toString()</code>、 <code>String.toInt()</code>、 <code>String.toIntOrNull()</code>，
每个都有一个带有 <code>radix</code> 参数的重载，它允许指定转换的基数。</p>
<h3 id="oneach">onEach()</h3>
<p><code>onEach</code> 是一个小、但对于集合和序列很有用的扩展函数，它允许对操作链中
的集合/序列的每个元素执行一些操作，可能带有副作用。
对于迭代其行为像 <code>forEach</code> 但是也进一步返回可迭代实例。 对于序列它返回一个
包装序列，它在元素迭代时延迟应用给定的动作。</p>
<h3 id="takeif-和-also">takeIf() 和 also()</h3>
<p>这俩是适用于任何接收者的两个通用扩展函数。</p>
<p><code>also</code> 就像 <code>apply</code>：它接受接收者、做一些动作、并返回该接收者。
二者区别是在 <code>apply</code> 内部的代码块中接收者是 <code>this</code>，
而在 <code>also</code> 内部的代码块中是 <code>it</code>（并且如果你想的话，你可以给它另一个名字）。
当你不想掩盖来自外部作用域的 <code>this</code> 时这很方便：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun Block.copy() = Block().also { it.content = this.content }
</code></pre>
<p><code>takeIf</code> 就像单个值的 <code>filter</code>。它检查接收者是否满足该谓词，并
在满足时返回该接收者否则不满足时返回 <code>null</code>。
结合 elvis-操作符和及早返回，它允许编写如下结构：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val outDirFile = File(outputDir.path).takeIf { it.exists() } ?: return false
// 对现有的 outDirFile 做些事情

val index = input.indexOf(keyword).takeIf { it &gt;= 0 } ?: error("keyword not found")
// 对输入字符串中的关键字索引做些事情，假定它找到
</code></pre>
<h3 id="groupingby">groupingBy()</h3>
<p>此 API 可以用于按照键对集合进行分组，并同时折叠每个组。 例如，它可以用于
计算文本中字符的频率：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val frequencies = words.groupingBy { it }.eachCount()
</code></pre>
<h3 id="maptomap-和-maptomutablemap">Map.toMap() 和 Map.toMutableMap()</h3>
<p>这俩函数可以用来简易复制映射：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">class ImmutablePropertyBag(map: Map&lt;String, Any&gt;) {
    private val mapCopy = map.toMap()
}
</code></pre>
<h3 id="minof-和-maxof">minOf() 和 maxOf()</h3>
<p>这俩函数可用于查找两个给定数字的最小值和最大值。</p>
<h3 id="类似数组的列表实例化函数">类似数组的列表实例化函数</h3>
<p>类似于 <code>Array</code> 构造函数，现在有创建 <code>List</code> 和 <code>MutableList</code> 实例的函数，并通过
调用 lambda 表达式来初始化每个元素：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">List(size) { index -&gt; element }
MutableList(size) { index -&gt; element }
</code></pre>
<h3 id="mapgetvalue">Map.getValue()</h3>
<p><code>Map</code> 上的这个方法返回一个与给定键相对应的现有值，或者抛出一个异常，提示找不到该键。
如果该映射是用 <code>withDefault</code> 生成的，这个方法将返回默认值，而不是抛异常。</p>
<h3 id="抽象集合">抽象集合</h3>
<p>这些抽象类可以在实现 Kotlin 集合类时用作基类。
对于实现只读集合，有 <code>AbstractCollection</code>、 <code>AbstractList</code>、 <code>AbstractSet</code> 和 <code>AbstractMap</code>，
而对于可变集合，有 <code>AbstractMutableCollection</code>、 <code>AbstractMutableList</code>、 <code>AbstractMutableSet</code> 和 <code>AbstractMutableMap</code>。
在 JVM 上，这些抽象可变集合从 JDK 的抽象集合继承了大部分的功能。</p>
<h2 id="jvm-后端">JVM 后端</h2>
<h3 id="java-8-字节码支持">Java 8 字节码支持</h3>
<p>Kotlin 现在可以选择生成 Java 8 字节码（命令行选项 <code>-jvm-target 1.8</code>或者Ant/Maven/Gradle 中
的相应选项）。目前这并不改变字节码的语义（特别是，接口和 lambda 表达式中的默认方法
的生成与 Kotlin 1.0 中完全一样），但我们计划在以后进一步使用它。</p>
<h3 id="java-8-标准库支持">Java 8 标准库支持</h3>
<p>现在有支持在 Java 7 和 8 中新添加的 JDK API 的标准库的独立版本。
如果你需要访问新的 API，请使用 <code>kotlin-stdlib-jre7</code> 和 <code>kotlin-stdlib-jre8</code> maven artifacts，而不是标准的 <code>kotlin-stdlib</code>。
这些工件是在 <code>kotlin-stdlib</code> 之上的微小扩展，它们将它作为传递依赖项带到项目中。</p>
<h3 id="字节码中的参数名">字节码中的参数名</h3>
<p>Kotlin 现在支持在字节码中存储参数名。这可以使用命令行选项 <code>-java-parameters</code> 启用。</p>
<h3 id="常量内联">常量内联</h3>
<p>编译器现在将 <code>const val</code> 属性的值内联到使用它们的位置。</p>
<h3 id="可变闭包变量">可变闭包变量</h3>
<p>用于在 lambda 表达式中捕获可变闭包变量的装箱类不再具有 volatile 字段。
此更改提高了性能，但在一些罕见的使用情况下可能导致新的竞争条件。如果受此影响，你需要提供
自己的同步机制来访问变量。</p>
<h3 id="javaxscripting-支持">javax.scripting 支持</h3>
<p>Kotlin 现在与<a href="https://docs.oracle.com/javase/8/docs/api/javax/script/package-summary.html">javax.script API</a>（JSR-223）集成。关于使用 API 的示例项目参见<a href="https://github.com/JetBrains/kotlin/tree/master/libraries/examples/kotlin-jsr223-local-example">这里</a>
。</p>
<h2 id="javascript-后端">JavaScript 后端</h2>
<h3 id="统一的标准库">统一的标准库</h3>
<p>Kotlin 标准库的大部分目前可以从代码编译成 JavaScript 来使用。
特别是，关键类如集合（<code>ArrayList</code>、 <code>HashMap</code> 等）、异常（<code>IllegalArgumentException</code> 等）以及其他
几个关键类（<code>StringBuilder</code>、 <code>Comparator</code>）现在都定义在 <code>kotlin</code> 包下。在 JVM 平台上，一些名称是相应 JDK 类的
类型别名，而在 JS 平台上，这些类在 Kotlin 标准库中实现。</p>
<h3 id="更好的代码生成">更好的代码生成</h3>
<p>JavaScript 后端现在生成更加可静态检查的代码，这对 JS 代码处理工具（如
minifiers、 optimisers、 linters 等）更加友好。</p>
<h3 id="external-修饰符"><code>external</code> 修饰符</h3>
<p>如果你需要以类型安全的方式从 Kotlin 访问 JavaScript 实现的类，
你可以使用 <code>external</code> 修饰符写一个 Kotlin 声明。（在 Kotlin 1.0 中，使用了 <code>@native</code> 注解。）
与 JVM 目标平台不同，JS 平台允许对类和属性使用外部修饰符。
例如，可以按以下方式声明 DOM <code>Node</code> 类：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">external class Node {
    val firstChild: Node

    fun appendChild(child: Node): Node

    fun removeChild(child: Node): Node

    // 等等
}
</code></pre>
<h3 id="改进的导入处理">改进的导入处理</h3>
<p>现在可以更精确地描述应该从 JavaScript 模块导入的声明。
如果在外部声明上添加 <code>@JsModule("&lt;module-name&gt;")</code> 注解，它会在编译期间正确导入
到模块系统（CommonJS或AMD）。例如，使用 CommonJS，该声明会
通过 <code>require(...)</code> 函数导入。
此外，如果要将声明作为模块或全局 JavaScript 对象导入，
可以使用 <code>@JsNonModule</code> 注解。</p>
<p>例如，以下是将 JQuery 导入 Kotlin 模块的方法：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@JsNonModule
@JsName("$")
external abstract class JQuery {
    fun toggle(duration: Int = 0): JQuery
    fun click(handler: (Event) -&gt; Unit): JQuery
}

@JsModule("jquery")
@JsNonModule
@JsName("$")
external fun JQuery(selector: String): JQuery
</code></pre>
<p>在这种情况下，JQuery 将作为名为 <code>jquery</code> 的模块导入。或者，它可以用作 $-对象，
这取决于Kotlin编译器配置使用哪个模块系统。</p>
<p>你可以在应用程序中使用如下所示的这些声明：</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun main(args: Array&lt;String&gt;) {
    JQuery(".toggle-button").click {
        JQuery(".toggle-panel").toggle(300)
    }
}
</code></pre>

        </article>
    </div>

    <script src="/0_assets/reference.js"></script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2017 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
            Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            由<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>、<a href="http://github.com/hltj" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a> <a href="https://github.com/cctanfujun/kotlin-web-site-cn#翻译进度" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer></body>
</html>
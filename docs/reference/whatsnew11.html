<html>
<head>
<meta charset="utf-8">


<title>What&#39;s New in Kotlin 1.1 - Kotlin 编程语言</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png"/>
<link rel="apple-touch-icon" sizes="72x72"
      href="/assets/images/apple-touch-icon-72x72.png"/>
<link rel="apple-touch-icon" sizes="114x114"
      href="/assets/images/apple-touch-icon-114x114.png"/>
<link rel="apple-touch-icon" sizes="144x144"
      href="/assets/images/apple-touch-icon-144x144.png"/>
<link rel="stylesheet" href="/0_assets/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="What&#39;s New in Kotlin 1.1 - Kotlin 编程语言"/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://kotlinlang.org/docs/reference/whatsnew11.html"/>
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png"/>
    <meta property="og:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta property="og:site_name" content="Kotlin"/>

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="What&#39;s New in Kotlin 1.1 - Kotlin 编程语言">
    <meta name="twitter:description"
          content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">
<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png">
<!-- Social Media tag Ends -->    <script src="/0_assets/default.js"></script>
    <script src="/0_assets/common.js"></script>
</head>
<body>
<!--  -->

<div class="global-layout">

<header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/">Kotlin</a>
<nav role="navigation" class="global-nav">

    <div class="nav-links">

            <a href="/docs/reference/"
               class="nav-item "
            >
                学习
            </a>

            <a href="/contribute.html"
               class="nav-item "
            >
                贡献
            </a>

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线试用
            </a>
    </div>


<div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div></nav>        </div>
    </div>

    <div class="g-layout">
    </div>
</header>
    <div class="g-layout global-content">
    <div class="g-grid">

        <div class="g-12">
<nav role="navigation" class="docs-nav">
        <div class="nav-item-wrap">
                <a href="/docs/reference/" class="nav-item is_active">
                        <span class="nav-item-text">
                            参考
                        </span>
                </a>
        </div>
        <div class="nav-item-wrap">
                <a href="/docs/tutorials/" class="nav-item">
                    <span class="nav-item-text">
                        教程
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        视频
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        事件
                    </span>
                </a>

        </div>
        <div class="nav-item-wrap">
                <a href="/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                </a>

        </div>
</nav>        </div>

        <aside class="g-3">
            <div id="reference-nav">
                    <nav role="navigation" class="side-tree-nav">
            <div class="tree-item tree-branch js-item js-branch _opened"
                 data-id="开始">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">开始</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-syntax.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基础语法</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/idioms.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">习惯用法</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/coding-conventions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">编码习惯</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                                <div class="marker"></div>
                                <div class="text">1.1 的新特性</div>
                            </div>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="基础">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">基础</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/basic-types.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">基本类型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/packages.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">包</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/control-flow.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">控制流</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/returns.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">返回和跳转</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="类和对象">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">类和对象</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类和继承</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">属性和字段</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/interfaces.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">接口</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/visibility-modifiers.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">可见性修饰符</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/extensions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">扩展</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/data-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">数据类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/generics.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">泛型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/nested-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">嵌套类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/enum-classes.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">枚举类</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/object-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">对象</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegation.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委托</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/delegated-properties.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">委托属性</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="函数和 Lambda 表达式">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">函数和 Lambda 表达式</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/functions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">函数</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/lambdas.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Lambda 表达式</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/inline-functions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">内联函数</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="其他">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">其他</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/multi-declarations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">解构声明</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/collections.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">集合</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/ranges.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">区间</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/typecasts.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类型检查与转换</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/this-expressions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">This 表达式</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/equality.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">相等性</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/operator-overloading.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">操作符重载</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/null-safety.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">空安全</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/exceptions.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">异常</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/annotations.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">注解</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">反射</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/type-safe-builders.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">类型安全的构建器</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="参考">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">参考</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="https://kotlinlang.org/api/latest/jvm/stdlib/index.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">API 参考</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/grammar.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">语法</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="Java 互操作">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">Java 互操作</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 调用 Java</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/java-to-kotlin-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Java 调用 Kotlin</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="JavaScript">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">JavaScript</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/dynamic-type.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">动态类型</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-interop.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript 互操作性</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/js-reflection.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">JavaScript 反射</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="工具">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">工具</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-doc.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">生成 Kotlin 代码文档</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-maven.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Maven</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-ant.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Ant</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/using-gradle.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">使用 Gradle</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/kotlin-osgi.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">Kotlin 和 OSGi</span>
                            </a>
                    </div>

            </div>
            <div class="tree-item tree-branch js-item js-branch _closed"
                 data-id="常见问题">

                <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
                    <div class="marker"></div>
                    <div class="text">常见问题</div>
                </div>

                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/faq.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">FAQ</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-java.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 Java 比较</span>
                            </a>
                    </div>
                    <div class="tree-item tree-leaf js-item js-leaf">
                            <a href="/docs/reference/comparison-to-scala.html"
                               class="tree-item-title tree-leaf-title js-item-title js-leaf-title"
                            >
                                <span class="marker"></span>
                                <span class="text">与 Scala 比较</span>
                            </a>
                    </div>

            </div>
    </nav>


                <a href="/docs/kotlin-docs.pdf" class="reference-pdf-link">
                    <span class="icon"></span>
                    <span class="text">完整 Kotlin 参考</span>
                </a>
            </div>
        </aside>

        <article role="main" class="page-content g-9">
<a href="https://github.com/JetBrains/kotlin-web-site/edit/master/pages/docs/reference/whatsnew11.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>
                
<h1 id="whats-new-in-kotlin-11">What's New in Kotlin 1.1</h1>
<p>Kotlin 1.1 is currently available in beta. Here you can find a list of new features available in this release.
Note that any new functionality is subject to change before Kotlin 1.1 is released.</p>
<h2 id="javascript">JavaScript</h2>
<p>Starting with Kotlin 1.1, the JavaScript target is no longer considered experimental. All language features are supported,
and there are many new tools for integration with the front-end development environment. See <a href="#javascript-backend">below</a> for
a more detailed list of changes.</p>
<h2 id="coroutines-experimental">Coroutines (experimental)</h2>
<p>The key new feature in Kotlin 1.1 is <em>coroutines</em>, bringing the support of <code>future</code>/<code>await</code>, <code>yield</code> and similar programming
patterns. The key feature of Kotlin's design is that the implementation of coroutine execution is part of the libraries,
not the language, so you aren't bound to any specific programming paradigm or concurrency library.</p>
<p>A coroutine is effectively a function that can be suspended and resumed later. For example, with <code>future</code>/<code>await</code>,
when you use <code>await</code>, the execution of the function is suspended while the operation being awaited is executed, and
is resumed (possibly on a different thread) when the operation being awaited completes.</p>
<p>The standard library uses coroutines to support <em>lazily generated sequences</em> with <code>yield</code> and <code>yieldAll</code> functions.
In such a sequence, the block of code that returns sequence elements is suspended after each element has been retrieved,
and resumed when the next element is requested. Here's an example:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val seq = buildSequence {
    println("Yielding 1")
    yield(1)
    println("Yielding 2")
    yield(2)
    println("Yielding a range")
    yieldAll(3..5)
}

for (i in seq) {
    println("Generated $i")
}
</code></pre>
<p>This will print:</p>
<pre><code>Yielding 1
Generated 1
Yielding 2
Generated 2
Yielding a range
Generated 3
Generated 4
Generated 5
</code></pre>
<p>The implementation of <code>future</code>/<code>await</code> is provided as an external library, <a href="https://github.com/kotlin/kotlinx.coroutines">kotlinx.coroutines</a>.
Here's an example showing its use:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">future {
    val original = asyncLoadImage("...original...") // creates a Future
    val overlay = asyncLoadImage("...overlay...")   // creates a Future
    ...
    // suspend while awaiting the loading of the images
    // then run `applyOverlay(...)` when they are both loaded
    return applyOverlay(original.await(), overlay.await())
}
</code></pre>
<p>kotlinx.coroutines <code>future</code> implementation relies on <code>CompletableFuture</code> and therefore requires JDK 8, but it also provides portable <code>defer</code> primitive and it's possible to build other implementations.</p>
<p>The <a href="https://github.com/Kotlin/kotlin-coroutines/blob/master/kotlin-coroutines-informal.md">KEEP document</a> provides an extended
description of the coroutine functionality.</p>
<p>Note that coroutines are currently considered an <strong>experimental feature</strong>, meaning that the Kotlin team is not committing
to supporting the backwards compatibility of this feature after the final 1.1 release.</p>
<h2 id="other-language-features">Other Language Features</h2>
<h3 id="type-aliases">Type aliases</h3>
<p>A type alias allows you to define an alternative name for an existing type.
This is most useful for generic types such as collections, as well as for function types.
Here are a few examples:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">typealias FileTable&lt;K&gt; = MutableMap&lt;K, MutableList&lt;File&gt;&gt;

typealias MouseEventHandler = (Any, MouseEvent) -&gt; Unit
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/type-aliases.md">KEEP</a> for more details.</p>
<h3 id="bound-callable-references">Bound callable references</h3>
<p>You can now use the <code>::</code> operator to get a <a href="reflection.html#function-references">member reference</a> pointing to a method or property of a specific object instance.
Previously this could only be expressed with a lambda.
Here's an example:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val numberRegex = "\\d+".toRegex()
val numbers = listOf("abc", "123", "456").filter(numberRegex::matches)
// Result is list of "123", "456"
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/bound-callable-references.md">KEEP</a> for more details.</p>
<h3 id="sealed-and-data-classes">Sealed and data classes</h3>
<p>Kotlin 1.1 removes some of the restrictions on sealed and data classes that were present in Kotlin 1.0.
Now you can define subclasses of a sealed class anywhere in the same file, and not just as nested classes of the sealed class.
Data classes can now extend other classes.
This can be used to define a hierarchy of expression classes nicely and cleanly:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">sealed class Expr

data class Const(val number: Double) : Expr()
data class Sum(val e1: Expr, val e2: Expr) : Expr()
object NotANumber : Expr()

fun eval(expr: Expr): Double = when (expr) {
    is Const -&gt; expr.number
    is Sum -&gt; eval(expr.e1) + eval(expr.e2)
    NotANumber -&gt; Double.NaN
}
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/sealed-class-inheritance.md">sealed class</a> and
<a href="https://github.com/Kotlin/KEEP/blob/master/proposals/data-class-inheritance.md">data class</a> KEEPs for more detail.</p>
<h3 id="destructuring-in-lambdas">Destructuring in lambdas</h3>
<p>You can now use the <a href="multi-declarations.html">destructuring declaration</a> syntax to unpack the arguments passed to a lambda.
Here's an example:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">map.mapValues { (key, value) -&gt; "$value!" }
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/destructuring-in-parameters.md">KEEP</a> for more details.</p>
<h3 id="underscores-for-unused-parameters">Underscores for unused parameters</h3>
<p>For a lambda with multiple parameters, you can use the <code>_</code> character to replace the names of the parameters you don't use:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">map.forEach { _, value -&gt; println("$value!") }
</code></pre>
<p>This also works in <a href="multi-declarations.html">destructuring declarations</a>:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val (_, status) = getResult()
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/underscore-for-unused-parameters.md">KEEP</a> for more details.</p>
<h3 id="underscores-in-numeric-literals">Underscores in numeric literals</h3>
<p>Just as in Java 8, Kotlin now allows to use underscores in numeric literals to separate groups of digits:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val oneMillion = 1_000_000
val hexBytes = 0xFF_EC_DE_5E
val bytes = 0b11010010_01101001_10010100_10010010
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/underscores-in-numeric-literals.md">KEEP</a> for more details.</p>
<h3 id="shorter-syntax-for-properties">Shorter syntax for properties</h3>
<p>For properties without custom accessors, or with the getter defined as an expression body, the property type can now be omitted:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val name = ""

val lazyName get() = ""
</code></pre>
<p>For both of these properties, the compiler will infer that the property type is <code>String</code>.</p>
<h3 id="inline-property-accessors">Inline property accessors</h3>
<p>You can now mark property accessors with the <code>inline</code> modifier if the properties don't have a backing field.
Such accessors are compiled in the same way as <a href="inline-functions.html">inline functions</a>.</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val foo: Foo
    inline get() = Foo()
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/inline-properties.md">KEEP</a> for more details.</p>
<h3 id="local-delegated-properties">Local delegated properties</h3>
<p>You can now use the <a href="delegated-properties.html">delegated property</a> syntax with local variables.
One possible use is defining a lazily evaluated local variable:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun foo() {
    val data: String by lazy { /* calculate the data */ }
    if (needData()) {
        println(data)   // data is calculated at this point
    }
}
</code></pre>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/local-delegated-properties.md">KEEP</a> for more details.</p>
<h3 id="interception-of-delegated-property-binding">Interception of delegated property binding</h3>
<p>For <a href="delegated-properties.html">delegated properties</a>, it is now possible to intercept delegate to property binding using the
<code>provideDelegate</code> operator.
For example, if we want to check the property name before binding, we can write something like this:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">class ResourceLoader&lt;T&gt;(id: ResourceID&lt;T&gt;) {
    operator fun provideDelegate(thisRef: MyUI, property: KProperty&lt;*&gt;): ReadOnlyProperty&lt;MyUI, T&gt; {
        checkProperty(thisRef, property.name)
        ... // property creation
    }

    private fun checkProperty(thisRef: MyUI, name: String) { ... }
}

fun &lt;T&gt; bindResource(id: ResourceID&lt;T&gt;): ResourceLoader&lt;T&gt; { ... }

class MyUI {
    val image by bindResource(ResourceID.image_id)
    val text by bindResource(ResourceID.text_id)
}
</code></pre>
<p>The <code>provideDelegate</code> method will be called for each property during the creation of a <code>MyUI</code> instance, and it can perform
the necessary validation right away.</p>
<h3 id="generic-enum-value-access">Generic enum value access</h3>
<p>It is now possible to enumerate the values of an enum class in a generic way:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">enum class RGB { RED, GREEN, BLUE }

print(enumValues&lt;RGB&gt;().joinToString { it.name }) // prints RED, GREEN, BLUE
</code></pre>
<h3 id="scope-control-for-implicit-receivers-in-dsls">Scope control for implicit receivers in DSLs</h3>
<p>The <code>@DslMarker</code> annotation allows to restrict the use of receivers from outer scopes in a DSL context.
Consider the canonical <a href="type-safe-builders.html">HTML builder example</a>:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">table {
    tr {
        td { +"Text" }
    }
}
</code></pre>
<p>In Kotlin 1.0, code in the lambda passed to <code>td</code> has access to three implicit receivers: the one passed to <code>table</code>, to <code>tr</code>
and to <code>td</code>. This allows you to call methods that make no sense in the context - for example to call <code>tr</code> inside <code>td</code> and thus
to put a <code>&lt;tr&gt;</code> tag in a <code>&lt;td&gt;</code>.</p>
<p>In Kotlin 1.1, you can restrict that, so that only methods defined on the implicit receiver of <code>td</code>
will be available inside the lambda passed to <code>td</code>. You do that by defining your annotation marked with the <code>@DslMarker</code> meta-annotation
and applying it to the base class of the tag classes:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@DslMarker
annotation class HtmlTagMarker

@HtmlTagMarker
abstract class Tag(val name: String) { ... }

class TD() : Tag("td") { ... }

fun Tag.td(init: TD.() -&gt; Unit) {
}
</code></pre>
<p>Now that the implicit receiver of the <code>init</code> lambda passed to the <code>td</code> function is a class annotated with <code>@HtmlTagMarker</code>,
so the outer receivers of types which also have this annotation will be blocked.</p>
<p>Read the <a href="https://github.com/Kotlin/KEEP/blob/master/proposals/scope-control-for-implicit-receivers.md">KEEP</a> for more details.</p>
<h3 id="-operator"><code>rem</code> operator</h3>
<p>The <code>mod</code> operator is now deprecated, and <code>rem</code> is used instead. See <a href="https://youtrack.jetbrains.com/issue/KT-14650">this issue</a> for motivation.</p>
<h2 id="standard-library">Standard library</h2>
<h3 id="string-to-number-conversions">String to number conversions</h3>
<p>There is a bunch of new extensions on the String class to convert it to a number without throwing an exception on invalid number:
<code>String.toIntOrNull(): Int?</code>, <code>String.toDoubleOrNull(): Double?</code> etc.</p>
<p>Also integer conversion functions, like <code>Int.toString()</code>, <code>String.toInt()</code>, <code>String.toIntOrNull()</code>,
each got an overload with <code>radix</code> parameter, which allows to specify the base of conversion.</p>
<h3 id="oneach">onEach()</h3>
<p><code>onEach</code> is a small, but useful extension function for collections and sequences, which allows to perform some action,
possibly with side-effects, on each element of the collection/sequence in a chain of operations.
On iterables it behaves like <code>forEach</code> but also returns the iterable instance further. And on sequences it returns a
wrapping sequence, which applies the given action lazily as the elements are being iterated.</p>
<h3 id="takeif-and-also">takeIf() and also()</h3>
<p>These are two general-purpose extension functions applicable to any receiver.</p>
<p><code>also</code> is like <code>apply</code>: it takes the receiver, does some action on it, and returns that receiver. 
The difference is that in the block inside <code>apply</code> the receiver is available as <code>this</code>, 
while in the block inside <code>also</code> it's available as <code>it</code> (and you can give it another name if you want).
This comes handy when you do not want to shadow <code>this</code> from the outer scope:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun Block.copy() = Block().also { it.content = this.content }
</code></pre>
<p><code>takeIf</code> is like <code>filter</code> for a single value. It checks whether the receiver meets the predicate, and
returns the receiver, if it does or <code>null</code> if it doesn't. 
Combined with an elvis-operator and early returns it allows to write constructs like:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val outDirFile = File(outputDir.path).takeIf { it.exists() } ?: return false
// do something with existing outDirFile

val index = input.indexOf(keyword).takeIf { it &gt;= 0 } ?: error("keyword not found")
// do something with index of keyword in input string, given that it's found
</code></pre>
<h3 id="groupingby">groupingBy()</h3>
<p>This API can be used to group a collection by key and fold each group simultaneously. For example, it can be used
to count the frequencies of characters in a text:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">val frequencies = words.groupingBy { it }.eachCount()
</code></pre>
<h3 id="maptomap-and-maptomutablemap">Map.toMap() and Map.toMutableMap()</h3>
<p>These functions can be used for easy copying of maps:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">class ImmutablePropertyBag(map: Map&lt;String, Any&gt;) {
    private val mapCopy = map.toMap()
}
</code></pre>
<h3 id="minof-and-maxof">minOf() and maxOf()</h3>
<p>These functions can be used to find the minimum and maximum of two given numbers.</p>
<h3 id="array-like-list-instantiation-functions">Array-like List instantiation functions</h3>
<p>Similar to the <code>Array</code> constructor, there are now functions that create <code>List</code> and <code>MutableList</code> instances and initialize
each element by calling a lambda:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">List(size) { index -&gt; element }
MutableList(size) { index -&gt; element }
</code></pre>
<h3 id="mapgetvalue">Map.getValue()</h3>
<p>This method on <code>Map</code> returns an existing value corresponding to the given key or throws an exception, mentioning which key was not found.
If the map was produced with <code>withDefault</code>, this method will return the default value instead of throwing an exception.</p>
<h3 id="abstract-collections">Abstract collections</h3>
<p>These abstract classes can be used as base classes when implementing Kotlin collection classes.
For implementing read-only collections there are <code>AbstractCollection</code>, <code>AbstractList</code>, <code>AbstractSet</code> and <code>AbstractMap</code>, 
and for mutable collections there are <code>AbstractMutableCollection</code>, <code>AbstractMutableList</code>, <code>AbstractMutableSet</code> and <code>AbstractMutableMap</code>.
On JVM these abstract mutable collections inherit most of their functionality from JDK's abstract collections.</p>
<h2 id="jvm-backend">JVM Backend</h2>
<h3 id="java-8-bytecode-support">Java 8 bytecode support</h3>
<p>Kotlin has now the option of generating Java 8 bytecode (<code>-jvm-target 1.8</code> command line option or the corresponding options
in Ant/Maven/Gradle). For now this doesn't change the semantics of the bytecode (in particular, default methods in interfaces
and lambdas are generated exactly as in Kotlin 1.0), but we plan to make further use of this later.</p>
<h3 id="java-8-standard-library-support">Java 8 standard library support</h3>
<p>There are now separate versions of the standard library supporting the new JDK APIs added in Java 7 and 8.
If you need access to the new APIs, use <code>kotlin-stdlib-jre7</code> and <code>kotlin-stdlib-jre8</code> maven artifacts instead of the standard <code>kotlin-stdlib</code>.
These artifacts are tiny extensions on top of <code>kotlin-stdlib</code> and they bring it to your project as a transitive dependency.</p>
<h3 id="parameter-names-in-the-bytecode">Parameter names in the bytecode</h3>
<p>Kotlin now supports storing parameter names in the bytecode. This can be enabled using the <code>-java-parameters</code> command line option.</p>
<h3 id="constant-inlining">Constant inlining</h3>
<p>The compiler now inlines values of <code>const val</code> properties into the locations where they are used.</p>
<h3 id="mutable-closure-variables">Mutable closure variables</h3>
<p>The box classes used for capturing mutable closure variables in lambdas no longer have volatile fields. This change improves
performance, but can lead to new race conditions in some rare usage scenarios. If you're affected by this, you need to provide
your own synchronization for accessing the variables.</p>
<h3 id="javaxscripting-support">javax.scripting support</h3>
<p>Kotlin now integrates with the <a href="https://docs.oracle.com/javase/8/docs/api/javax/script/package-summary.html">javax.script API</a> (JSR-223). See <a href="https://github.com/JetBrains/kotlin/tree/master/libraries/examples/kotlin-jsr223-local-example">here</a>
for an example project using the API.</p>
<h2 id="javascript-backend">JavaScript Backend</h2>
<h3 id="unified-standard-library">Unified standard library</h3>
<p>A much larger part of the Kotlin standard library can now be used from code compiled to JavaScript.
In particular, key classes such as collections (<code>ArrayList</code>, <code>HashMap</code> etc.), exceptions (<code>IllegalArgumentException</code> etc.) and a few
others (<code>StringBuilder</code>, <code>Comparator</code>) are now defined under the <code>kotlin</code> package. On the JVM, the names are type
aliases for the corresponding JDK classes, and on the JS, the classes are implemented in the Kotlin standard library.</p>
<h3 id="better-code-generation">Better code generation</h3>
<p>JavaScript backend now generates more statically checkable code, which is friendlier to JS code processing tools,
like minifiers, optimisers, linters, etc.</p>
<h3 id="the--modifier">The <code>external</code> modifier</h3>
<p>If you need to access a class implemented in JavaScript from Kotlin in a typesafe way, you can write a Kotlin
declaration using the <code>external</code> modifier. (In Kotlin 1.0, the <code>@native</code> annotation was used instead.)
Unlike the JVM target, the JS one permits to use external modifier with classes and properties.
For example, here's how you can declare the DOM <code>Node</code> class:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">external class Node {
    val firstChild: Node

    fun appendChild(child: Node): Node

    fun removeChild(child: Node): Node

    // etc
}
</code></pre>
<h3 id="improved-import-handling">Improved import handling</h3>
<p>You can now describe declarations which should be imported from JavaScript modules more precisely.
If you add the <code>@JsModule("&lt;module-name&gt;")</code> annotation on an external declaration it will be properly imported
to a module system (either CommonJS or AMD) during the compilation. For example, with CommonJS the declaration will be
imported via <code>require(...)</code> function.
Additionally, if you want to import a declaration either as a module or as a global JavaScript object,
you can use the <code>@JsNonModule</code> annotation.</p>
<p>For example, here's how you can import JQuery into a Kotlin module:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">@JsNonModule
@JsName("$")
external abstract class JQuery {
    fun toggle(duration: Int = 0): JQuery
    fun click(handler: (Event) -&gt; Unit): JQuery
}

@JsModule("jquery")
@JsNonModule
@JsName("$")
external fun JQuery(selector: String): JQuery
</code></pre>
<p>In this case, JQuery will be imported as a module named <code>jquery</code>. Alternatively, it can be used as a $-object,
depending on what module system Kotlin compiler is configured to use.</p>
<p>You can use these declarations in your application like this:</p>
<pre><code class="code _highlighted" data-lang="text/x-kotlin">fun main(args: Array&lt;String&gt;) {
    JQuery(".toggle-button").click {
        JQuery(".toggle-panel").toggle(300)
    }
}
</code></pre>

        </article>
    </div>

    <script src="/0_assets/reference.js"></script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2017 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
            Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a>
            由<a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>、<a href="http://github.com/hltj" class="testimonial-company-link" target="_blank" rel="nofollow">灰蓝天际</a> <a href="https://github.com/cctanfujun/kotlin-web-site-cn#翻译进度" class="testimonial-company-link" target="_blank" rel="nofollow">等</a>译
            </div>
        </div>
    </div>

</footer></body>
</html>